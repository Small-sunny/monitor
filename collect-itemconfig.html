<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="admin, dashboard, bootstrap, template, flat, modern, theme, responsive, fluid, retina, backend, html5, css, css3">
    <meta name="description" content="">
    <meta name="author" content="ThemeBucket">
    <link rel="shortcut icon" href="#" type="image/png">

    <title>采集项配置</title>

    <!--icheck-->
    <link href="js/iCheck/skins/minimal/minimal.css" rel="stylesheet">
    <link href="js/iCheck/skins/square/square.css" rel="stylesheet">
    <link href="js/iCheck/skins/square/red.css" rel="stylesheet">
    <link href="js/iCheck/skins/square/blue.css" rel="stylesheet">

    <!--dashboard calendar-->
    <link href="css/clndr.css" rel="stylesheet">

    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="js/morris-chart/morris.css">

    <!--common-->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/style-responsive.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style1.css">
    <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
    <style>
        .header-section{
            background-color: #65CEA7;
        }
        .wrapper .panel-heading{
            background-color: #65CEA7;
            color:#fff;
        }
        hr{
            margin: 0;
        }
        /*select*/
        select {
            /*Chrome和Firefox里面的边框是不一样的，所以复写了一下*/
            border: solid 1px #d2d2d2;

            /*很关键：将默认的select选择框样式清除*/
            appearance:none;
            -moz-appearance:none;
            -webkit-appearance:none;
            /*为下拉小箭头留出一点位置，避免被文字覆盖*/
            padding-right: 14px;
        }
        .sel .select11{
            display: none;
        }
        .select{
            width:190px;
            min-height:295px;
            margin:10px auto;
        }
        .select option{
            width:150px;
            height:30px;
        }
        .search input{
            border:1px solid #d2d2d2;
            border-radius: 3px;
        }
        .form1 .col-lg-2{
            margin-top: 50px;
            min-height:295px;
        }
        .form1 .col-lg-2 .btns{
            text-align: center;
            margin-top: 50px;
        }
        .form1 .col-lg-2 .btn{
            margin-top: 10px;
        }
        .text-right{
            margin-right: 15px;
        }
        .back-btn{
            margin-bottom: 10px;
        }
        #myModal .modal-content{
            margin-top: 70px;
        }
        .c-content{
            min-height: 460px;
        }
        #myModal .modal-dialog{
            min-height: 460px;
        }
        #myModal .list-group-item{
            padding:5px;
        }
        select{
            /*很关键：将默认的select选择框样式清除*/
            appearance:none;
            -moz-appearance:none;
            -webkit-appearance:none;

            /*在选择框的最右侧中间显示小箭头图片*/
            background: url("http://ourjs.github.io/static/2015/arrow.png") no-repeat scroll right center transparent;
            border-radius: 5px;
            border: 2px solid #65CEA7;
        }
        select:focus option:checked{
            color: white;
            background-image:linear-gradient(#65CEA7, #65CEA7);
        }
    </style>

</head>

<body class="sticky-header">

<section>
    <!-- left side start-->
    <div class="left-side sticky-left-side">

        <!--logo and iconic logo start-->
        <div class="logo">
            <h4><a href="index.html"><span>Lumino</span>Admin</a></h4>
        </div>

        <!--<div class="logo-icon text-center">
            <a href="index.html"><img src="images/logo_icon.png" alt=""></a>
        </div>-->
        <!--logo and iconic logo end-->
        <div class="left-side-inner">
            <ul class="nav nav-pills nav-stacked custom-nav">
                <li class="menu-list">
                    <a href=""><i class="fa fa-laptop"></i> <span>告警信息管理</span></a>
                    <ul class="sub-menu-list">
                        <li ><a onclick="indexlists();">告警信息列表</a></li>
                    </ul>
                </li>
                <li class="menu-list">
                    <a><i class="fa fa-book"></i> <span>我的监控项</span></a>
                    <ul class="sub-menu-list">
                        <li class="active"><a onclick="jumpTomyalarm();">所有客户端列表</a></li>
                        <!--<li ><a onclick="alarmConfig();">告警项配置</a></li>
                        <li ><a onclick="collect();">采集项配置</a></li>-->
                    </ul>
                </li>
                <li class="menu-list active">
                    <a onclick="collect();"><i class="fa fa-dashboard"></i> <span>采集项配置</span></a>
                </li>
            </ul>
            <!--sidebar nav end-->
        </div>
    </div>
    <!-- left side end-->

    <!-- main content start-->
    <div class="main-content" >

        <!-- header section start-->
        <div class="header-section">

            <!--toggle button start-->
            <a class="toggle-btn"><i class="fa fa-bars"></i></a>
            <!--toggle button end-->

            <!--search start-->
            <form class="searchform" action="index.html" method="post">
                <input type="text" class="form-control" name="keyword" placeholder="Search here..." />
            </form>
            <!--search end-->

            <!--notification menu start  右侧登录信息-->
            <div class="menu-right">
                <ul class="notification-menu">
                    <li>
                        <a  href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <img src="images/photos/user-avatar.png" alt="" />
                            <span id="uname">登录</span>
                            <span class="caret"></span>
                        </a>
                        <ul id="user" class="dropdown-menu dropdown-menu-usermenu pull-right">
                            <li><a href="#" disabled="true"><i class="fa fa-user"></i>修改密码</a></li>
                            <!--<li><a href="#"><i class="fa fa-cog"></i>  Settings</a></li>-->
                            <li><a disabled="true" onclick="loginOut();"><i class="fa fa-sign-out"></i>退出</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!--notification menu end -->

        </div>
        <!-- header section end-->

        <!-- page heading start-->
        <div class="page-heading">
            <h1>采集项配置</h1>
        </div>
        <!-- page heading end-->
        <hr/>

        <!--body wrapper start-->
        <div class="wrapper">
            <div class="row">
                <div class="col-xs-12 col-md-12">
                    <div class="panel ">
                        <div class="panel-heading panel-blue">采集项配置</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-lg-6" >
                                    <form action="" class="form1">
                                        <div class="row">
                                            <div class="col-lg-8">
                                                <label>请输入采集配置备注: <input id="remark" type="text" value="" ></label>
                                                <p></p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-5">

                                                <div class="search">已监控:</div>
                                                <div class="sel">
                                                    <select class="select11" id="select11"  multiple="multiple">
                                                        <!--<option value="cpu_temp">cpu温度</option>
                                                        <option value="use_cpu">CPU使用率</option>

                                                        <option value="eth0_rx">网口0接收速率</option>
                                                        <option value="eth0_tx">网口0发送速率</option>
                                                        <option value="ping_value">ping延时</option>

                                                        <option value="mem_free">剩余内存</option>
                                                        <option value="mem_total">总内存</option>

                                                        <option value="pix_percent">pix目录占用百分比</option>
                                                        <option value="pix_total">pix总目录大小</option>

                                                        <option value="root_percent">根目录百分比</option>
                                                        <option value="root_total">根目录总大小</option>

                                                        <option value="current_time">系统当前时间</option>
                                                        <option value="io_util">IO使用率</option>
                                                        <option value="raid_ok">raid卡状态</option>
                                                        <option value="sys_uptime">系统开机时间</option>
                                                    -->
                                                    </select>
                                                    <select id="select1" class="select" multiple="multiple">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-2">
                                                <div class="btns">
                                                    <a id="add" class="btn btn-success">&gt;</a> <br>
                                                    <a id="add_all" class="btn btn-success">&gt;&gt;</a> <br>
                                                    <a id="remove" class="btn btn-danger">&lt;</a> <br>
                                                    <a id="remove_all" class="btn btn-danger">&lt;&lt;</a>
                                                </div>
                                            </div>
                                            <div class="col-lg-5">
                                                <div class="search">未监控：</div>
                                                <div class="bsel">
                                                    <select  class="select" multiple="multiple" id="select2">

                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <a onclick="addConfig();" class="btn btn-success">保存</a>
                                            <a href="" class="btn btn-default">取消</a>
                                        </div>
                                    </form>
                                </div>

                                <div class="col-lg-6">
                                    <h4 >所有配置列表：</h4>
                                    <table id="configList" class="table table-hover">
                                        <thead>
                                        <tr>

                                            <th>配置名称</th>
                                            <th>配置项ID</th>
                                            <th>操作</th>
                                        </tr>
                                        </thead>
                                        <tbody>


                                        </tbody>
                                    </table>
                                    <ul id="footer" class="pagination">
                                        <!--<li><a href="">首页</a></li>
                                        <li class="disabled"><a href="">上一页</a></li>
                                        <li class="active"><a href="">1</a></li>
                                        <li class="disabled"><a href="">下一页</a></li>
                                        <li><a href="">尾页</a></li>
                                        <li id="count"></li>
                                        -->
                                    </ul>
                                </div>

                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--body wrapper end-->

    </div>
    <!-- main content end-->
</section>

<!-- Placed js at the end of the document so the pages load faster -->
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/jquery-ui-1.9.2.custom.min.js"></script>
<script src="js/jquery-migrate-1.2.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/modernizr.min.js"></script>
<script src="js/jquery.nicescroll.js"></script>


<!--easy pie chart-->
<script src="js/easypiechart/jquery.easypiechart.js"></script>
<script src="js/easypiechart/easypiechart-init.js"></script>

<!--Sparkline Chart-->
<script src="js/sparkline/jquery.sparkline.js"></script>
<script src="js/sparkline/sparkline-init.js"></script>

<!--icheck -->
<script src="js/iCheck/jquery.icheck.js"></script>
<script src="js/icheck-init.js"></script>

<!--Calendar-->
<script src="js/calendar/clndr.js"></script>
<script src="js/calendar/evnt.calendar.init.js"></script>
<script src="js/calendar/moment-2.2.1.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>

<!--common scripts for all pages-->

<script src="js/scripts.js"></script>

<script src="js/baiduTemplate.js"></script>
<script id="t:table" type="text/html">

    <@ for (var i = 0; i < data.length; i++){ @>
    <@var item=data[i].collectMonitorItems;@>
    <tr >
        <td><@=data[i].remark@></td>
        <td>
            <!--<a data-toggle="modal" data-target="#myModal"><@=data[i].id@></a>-->
            <a onclick="collectDetail('<@=data[i].id@>');"><@=data[i].id@></a>
        </td>
        <td>
            <a onclick="deleteList('<@=data[i].id@>');" class="btn btn-success">删除</a>
        </td>
    </tr>
    <@}@>

</script>
<script id="t2:table" type="text/html">
    <@ for (var i = 0; i < data.length; i++){ @>
    <@var item=data[i].collectMonitorItems;@>
        <@ for (var j = 0; j < item.length; j++){ @>
            <@if(item[j].indexOf("+")!=-1){@>
                <@item[j]=item[j].replace("+","");@>
            <option value="<@=item[j]@>">
                <@if(item[j]=='use_cpu'){@>
                cpu使用率
                <@}@>
                <@if(item[j]=='eth0_tx'){@>
                eth0网卡出网速
                <@}@>
                <@if(item[j]=='ping_value'){@>
                ping延时
                <@}@>
                <@if(item[j]=='mem_free'){@>
                内存占用
                <@}@>
                <@if(item[j]=='mem_total'){@>
                内存总大小
                <@}@>
                <@if(item[j]=='pix_percent'){@>
                pix占比
                <@}@>
                <@if(item[j]=='pix_total'){@>
                pix总大小
                <@}@>
                <@if(item[j]=='root_percent'){@>
                根目录占比
                <@}@>
                <@if(item[j]=='root_total'){@>
                根目录总大小
                <@}@>
                <@if(item[j]=='current_time'){@>
                脚本执行时间
                <@}@>
                <@if(item[j]=='io_util'){@>
                磁盘io使用率
                <@}@>
                <@if(item[j]=='raid_ok'){@>
                raid卡是否正常
                <@}@>
                <@if(item[j]=='sys_uptime'){@>
                系统开机时长
                <@}@>
                <@if(item[j]=='cpu_temp'){@>
                cpu温度
                <@}@>
                <@if(item[j]=='eth0_rx'){@>
                eth0网卡入网速
                <@}@>
            </option>
        <@}@>
        <@}@>
    <@}@>
</script>
<script id="t3:table" type="text/html">
    <@ for (var i = 0; i < data.length; i++){ @>
    <@var item=data[i].collectMonitorItems;@>
    <@ for (var j = 0; j < item.length; j++){ @>
    <@if(item[j].indexOf("-")!=-1){@>
    <@item[j]=item[j].replace("-","");@>
    <option value="<@=item[j]@>">
        <@if(item[j]=='use_cpu'){@>
        cpu使用率
        <@}@>
        <@if(item[j]=='eth0_tx'){@>
        eth0网卡出网速
        <@}@>
        <@if(item[j]=='ping_value'){@>
        ping延时
        <@}@>
        <@if(item[j]=='mem_free'){@>
        内存占用
        <@}@>
        <@if(item[j]=='mem_total'){@>
        内存总大小
        <@}@>
        <@if(item[j]=='pix_percent'){@>
        pix占比
        <@}@>
        <@if(item[j]=='pix_total'){@>
        pix总大小
        <@}@>
        <@if(item[j]=='root_percent'){@>
        根目录占比
        <@}@>
        <@if(item[j]=='root_total'){@>
        根目录总大小
        <@}@>
        <@if(item[j]=='current_time'){@>
        脚本执行时间
        <@}@>
        <@if(item[j]=='io_util'){@>
        磁盘io使用率
        <@}@>
        <@if(item[j]=='raid_ok'){@>
        raid卡是否正常
        <@}@>
        <@if(item[j]=='sys_uptime'){@>
        系统开机时长
        <@}@>
        <@if(item[j]=='cpu_temp'){@>
        cpu温度
        <@}@>
        <@if(item[j]=='eth0_rx'){@>
        eth0网卡入网速
        <@}@>
    </option>
    <@}@>
    <@}@>
    <@}@>
</script>
<script id="t1:table" type="text/html">
    <@for(var i=0;i< c_keyList.length ;i++){@>
        <@if(c_keyList[i]=='use_cpu'){@>
            <option value="<@=c_keyList[i]@>">cpu使用率</option>
        <@}@>
        <@if(c_keyList[i]=='cpu_temp'){@>
            <option value="<@=c_keyList[i]@>">cpu温度</option>
        <@}@>
    <@}@>
    <@for(var i=0;i< e_keyList.length ;i++){@>
        <@if(e_keyList[i]=='eth0_tx'){@>
            <option value="<@=e_keyList[i]@>">eth0网卡出网速</option>
        <@}@>
        <@if(e_keyList[i]=='eth0_rx'){@>
            <option value="<@=e_keyList[i]@>">eth0网卡入网速</option>
        <@}@>
        <@if(e_keyList[i]=='ping_value'){@>
            <option value="<@=e_keyList[i]@>">ping延时</option>
        <@}@>
    <@}@>
    <@for(var i=0;i< m_keyList.length ;i++){@>
        <@if(m_keyList[i]=='mem_free'){@>
            <option value="<@=m_keyList[i]@>">内存占用</option>
        <@}@>
        <@if(m_keyList[i]=='mem_total'){@>
            <option value="<@=m_keyList[i]@>">内存总大小</option>
        <@}@>
    <@}@>
    <@for(var i=0;i< p_keyList.length ;i++){@>
        <@if(p_keyList[i]=='pix_percent'){@>
            <option value="<@=p_keyList[i]@>">pix占比</option>
        <@}@>
        <@if(p_keyList[i]=='pix_total'){@>
            <option value="<@=p_keyList[i]@>">pix总大小</option>
        <@}@>
    <@}@>
    <@for(var i=0;i< r_keyList.length ;i++){@>
        <@if(r_keyList[i]=='root_percent'){@>
            <option value="<@=r_keyList[i]@>">根目录占比</option>
        <@}@>
        <@if(r_keyList[i]=='root_total'){@>
            <option value="<@=r_keyList[i]@>">根目录总大小</option>
        <@}@>
    <@}@>
    <@for(var i=0;i< s_keyList.length ;i++){@>
        <@if(s_keyList[i]=='current_time'){@>
            <option value="<@=s_keyList[i]@>">脚本执行时间</option>
        <@}@>
        <@if(s_keyList[i]=='io_util'){@>
            <option value="<@=s_keyList[i]@>">磁盘io使用率</option>
        <@}@>
        <@if(s_keyList[i]=='raid_ok'){@>
            <option value="<@=s_keyList[i]@>">raid卡是否正常</option>
        <@}@>
        <@if(s_keyList[i]=='sys_uptime'){@>
            <option value="<@=s_keyList[i]@>">系统开机时长</option>
        <@}@>
    <@}@>
</script>
<script type="text/javascript">
    var leftInputLength = 0;
    var rightInputLength = 0;
    $(function(){
        var optionsOverAll = $("#select11").children();
        var r_optionsOverAll=$("#select2").children();
        //leftInputLength = $("#unBindKey").val().length;
        //rightInputLength = $("#bindKey").val().length;
        $("#select1").append(optionsOverAll);

        //移到右边
        $('#add').bind('click', function() {
            //获取选中的选项，删除并追加给对方
            $('#select1 option:selected').appendTo('#select2');
            r_optionsOverAll=$("#select2").children();
        });
        //移到左边
        $('#remove').bind('click', function() {
            $('#select2 option:selected').appendTo('#select1');
            optionsOverAll=$("#select1").children();
        });
        //全部移到右边
        $('#add_all').bind('click', function() {
            $('#select1 option').appendTo('#select2');
            r_optionsOverAll=$("#select2").children();

        });
        //全部移到左边
        $('#remove_all').bind('click', function() {
            $('#select2 option').appendTo('#select1');
            optionsOverAll=$("#select1").children();
        });
        //双击选项
        $('#select1').bind('dblclick', function() { //绑定双击事件
            //获取全部的选项,删除并追加给对方
            $("option:selected", this).appendTo('#select2'); //追加给对方
        });
        //双击选项
        $('#select2').bind('dblclick', function() {
        });
    });
</script>
<script>
    var bt=baidu.template;
    var userName;
    function getuserName(name) {
        var reg1 = new RegExp("(^|&)" + name + "=([^&]*)(&|;)", "i");
        //	    var r = window.location.search.substr(1).match(reg);
        var r1 = decodeURI(window.location.search.substr(1)).match(reg1);
        if (r1 != null) return unescape(r1[2]); return null;
    }
    userName = getuserName("userName");
    //获取cid
    var cid;
    function getCid(name) {
        var reg = new RegExp("(^|:)" + name + "=([^:]*)(:|$)", "i");
        //	    var r = window.location.search.substr(1).match(reg);
        var r = decodeURI(window.location.search.substr(1)).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }
    cid=getCid("cid");
    console.log(cid);
    var jsessionid;
    //获取jsessionid
    function getSessionid(name) {
        var reg = new RegExp("(^|;)" + name + "=([^;]*)(;|:)", "i");
        //	    var r = window.location.search.substr(1).match(reg);
        var r = decodeURI(window.location.search.substr(1)).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }
    jsessionid=getSessionid("jsessionid");
    console.log(jsessionid);
    /*function alarmConfig(){
        window.location.href = 'alarm-configuration.html?userName='+userName+';jsessionid='+jsessionid+':did='+did;
    }*/
    /*function myalarm(){
        window.location.href = 'myalarm.html?userName='+userName+';jsessionid='+jsessionid;
    }*/
    function jumpTomyalarm(){
        window.location.href = 'myalarm.html?userName='+userName+';jsessionid='+jsessionid;
    }
    function collect(){
        location.reload();
    }
    function indexlists(){
        window.location.href='index.html?userName='+userName+';jsessionid='+jsessionid;
    }
    function login(userName,passwd) {
        $.post('http://192.168.0.217:6677//web/user/login?userName' +userName+ '&passwd=' + passwd, null, function (data) {
            console.log(data);
            var result=eval('('+data+')');
            if (result.code== 0) {
                if(userName=='admin'){
                    $('#uname').html(userName+ ' (管理员)');
                }else{
                    $('#uname').html(userName+ ' (用户)');
                }
            } else {
                window.location.href = 'login.html';
            }
        })
    }
    function checkLogin(){
        userName = getuserName("userName");
        console.log(userName);
        if(userName != null){
            $('#uname').html(userName);
            //$('#user').css("display","block");
        }
    }
    checkLogin();

    function loginOut(){
        $.post("http://192.168.0.217:6677//web/user/logout",null,function(data){
            var result=eval('('+data+')');
            if(result.code== 0){
                $('#uname').html('登录');
                //location.reload();
                //console.log($('#uname').html());
                window.location.href = 'login.html';
            }else{
                alert("请求错误！");
            }
        })

    }
    var c_keyList=[];
    var e_keyList=[];
    var m_keyList=[];
    var p_keyList=[];
    var r_keyList=[];
    var s_keyList=[];
    /*采集项参考*/
        function collectMonitorItems(){
            $.get('http://192.168.0.217:6677//web/client/monitorItemsRef;jsessionid='+jsessionid,null,function(result){
                var result=eval('('+result+')');
                console.log(result.data);
                console.log(result.data.cpu);
                console.log(result.data.eth0);
                console.log(result.data.mem);
                console.log(result.data.pix);
                console.log(result.data.root);
                console.log(result.data.sys);
                var data_cpu=result.data.cpu;
                var data_eth0=result.data.eth0;
                var data_mem=result.data.mem;
                var data_pix=result.data.pix;
                var data_root=result.data.root;
                var data_sys=result.data.sys;
                for(var key1 in data_cpu){
                    c_keyList.push(key1);
                }
                for(var key2 in data_eth0){
                    e_keyList.push(key2);
                }
                for(var key3 in data_mem){
                    m_keyList.push(key3);
                }
                for(var key4 in data_pix){
                    p_keyList.push(key4);
                }
                for(var key5 in data_root){
                    r_keyList.push(key5);
                }
                for(var key6 in data_sys){
                    s_keyList.push(key6);
                }
                if(result.code == 0){
                    var tableHtml1=bt('t1:table',result);
                    $('#select1').html();
                    $('#select1').html(tableHtml1);
                }else{
                    alert("请求错误！");
                    window.location.href = 'login.html';
                }
            })
        }
        collectMonitorItems();
    function collectDetail(conid){
        /*$.get("http://192.168.0.217:6677//web/collectioncof/list;jsessionid="+jsessionid+"?pageNum="+1+'&size='+10,null, function(result){
            console.log(result);
            //alert(result);
            var result = eval('('+result+')');
            //$("#select2").html();
            //console.log(result);
            if(result.code==0){
                var tableHtml2=bt('t2:table',result);
                $('#select1').html();
                $('#select1 ').html(tableHtml2);
                var tableHtml3=bt('t3:table',result);
                $('#select2').html();
                $('#select2').html(tableHtml3);
            }else{
                alert('请求错误!');
            }
        });*/
    }
    /*更新采集项*/
    /*var str=encodeURIComponent('+edeee');
    console.log(str);*/
    var collectAfter=[];
    var ops=[];
    /*function updateCollect(){
        $("#select2 option").each(function(){
            ops.push($(this).val());
        });
        console.log(ops);
        collectAfter=ops.join("@");
        console.log(collectAfter);

        if(ops.length==0){
            alert("请添加监控项！");
            return;
        }
        if(confirm("确认要排除这些监控项吗？")){
            $.post("http://192.168.0.217:6677//web/client/collectMonitorItems/"+cid+";jsessionid="+jsessionid+"?collectMonitorItems="+collectAfter,null, function(result){
                //alert(result);
                var result = eval('('+result+')');
                //$("#select2").html();
                console.log(result);
                if(result.code==0){
                    alert("修改成功！");
                    $("#select2 option").remove();
                }else{
                    alert('保存失败!');
                }
            });
        }

    }*/
    //http://192.168.0.217:6677//web/collectioncof/add?collectMonitorItems=1&remark=
    function addConfig(){
        var remark=$("#remark").val();
        //+ 已监控
        $("#select1 option").each(function(){
            ops.push('+'+$(this).val());

        });
        //- 未监控
        $("#select2 option").each(function(){
            ops.push('-'+$(this).val());
        });
        console.log(ops);
        collectAfter=ops.join("@");
        collectAfter=collectAfter.replace(/\+/g,"%2B");
        //encodeURIComponent(collectAfter);//%2B
        console.log(collectAfter);
        $.post("http://192.168.0.217:6677//web/collectioncof/add;jsessionid="+jsessionid+"?collectMonitorItems="+collectAfter+"&remark="+remark,null, function(result){
            console.log(result);
            //alert(result);
            var result = eval('('+result+')');
            //$("#select2").html();
            console.log(result);
            if(result.code==0){
                alert("修改成功！");
                window.location.reload();
                //$("#select2 option").remove();
            }else{
                alert('保存失败!');
            }
        });
    }
    //采集配置项已配置的列表
    //http://192.168.0.217:6677//web/collectioncof/list?pageNum=1&size=10
    function collectList(pageNum,size){
        $.get("http://192.168.0.217:6677//web/collectioncof/list;jsessionid="+jsessionid+"?pageNum="+pageNum+'&size='+size,null, function(result){
            console.log(result);
            //alert(result);
            var result = eval('('+result+')');
            //$("#select2").html();
            //console.log(result);
            if(result.code==0){
                var tableHtml=bt('t:table',result);
                $('#configList tbody').html();
                $('#configList tbody').html(tableHtml);
                console.log(result.data);
                var pagecode = getpagecode(result.pageInfo.totalCount,result.pageInfo.currentPageNum,result.pageInfo.currentSize);
                if(result.data.length==0){
                    $("#footer").html("暂无数据！");
                }else{
                    $("#footer").html("");
                    $("#footer").html(pagecode);
                    $("#count").text("总记录数："+result.pageInfo.totalCount);
                }
            }else{
                alert('请求错误!');
            }
        });
    }
    collectList(1,5);
    /*删除某项配置*/
    function deleteList(conid){//http://192.168.0.217:6677//web/collectioncof/del?id=
        if(confirm("确认要删除该项吗？")) {
            $.post("http://192.168.0.217:6677//web/collectioncof/del;jsessionid=" + jsessionid + "?id=" + conid, null, function (result) {
                var result = eval('(' + result + ')');
                if (result.code == 0) {
                    alert("删除成功！");
                    parent.location.reload();
                } else {
                    alert('删除成功!');
                }
            });
        }
    }
    //更新采集项配置
    //http://192.168.0.217:6677//web/client/collectMonitorItems/12345?collectionCofId=
    function updateCollect(){
        $.post("http://192.168.0.217:6677//web/client/collectMonitorItems/"+cid+";jsessionid="+jsessionid+"?collectionCofId="+conid,null, function(result){
            console.log(result);
            //alert(result);
            var result = eval('('+result+')');
            //$("#select2").html();
            console.log(result);
            if(result.code==0){
                alert("修改成功！");
                window.location.reload();
                //$("#select2 option").remove();
            }else{
                alert('保存失败!');
            }
        });
    }
    /*分页*/
    function getpagecode(totalNum,currentPage,pageSize){
        var totalPage=totalNum%pageSize==0?parseInt(totalNum/pageSize):parseInt(totalNum/pageSize)+1;
        //		    	alert("totalpage"+totalPage+"currentPage"+currentPage);
        var pageCode = "<ul class='pagination pagination-sm no-margin pull-right'>";
        pageCode = pageCode + "<li><a pageNum='1' onclick='collectList(1,"+pageSize+")'>首页</a></li>";
        if(currentPage==1){
            pageCode = pageCode + "<li class='disabled'><a href='#'>上一页</a></li>";
        }else{
            pageCode = pageCode + "<li><a pageNum='"+(currentPage-1)+"' onclick='collectList("+(currentPage-1)+","+pageSize+")'>上一页</a></li>";
        }
        for(var i=currentPage-2;i<=currentPage+2;i++){
            if(i<1||i>totalPage){
                continue;
            }
            if(i==currentPage){
                pageCode = pageCode + "<li class='active'><a href='#'>"+i+"</a></li>";
            }else{
                pageCode = pageCode + "<li><a pageNum='"+i+"' onclick='collectList("+i+","+pageSize+")'>"+i+"</a></li>";
            }
        }
        if(currentPage==totalPage){
            pageCode = pageCode + "<li class='disabled'><a href='#'>下一页</a></li>";
        }else{
            pageCode = pageCode + "<li><a pageNum='"+(currentPage+1)+"' onclick='collectList("+(currentPage+1)+","+pageSize+")'>下一页</a></li>";
        }
        pageCode = pageCode + "<li><a pageNum='"+totalPage+"' onclick='collectList("+totalPage+","+pageSize+")'>尾页</a></li>";
        pageCode = pageCode + "</ul>";
        if(totalNum == 0)
            pageCode="";
        return pageCode
    }
</script>
<!--<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-body">
                            <div class="c-content">
                                <div class="col-lg-6">
                                    <h4>已监控：</h4>
                                    <ul class="list-group" id="collectConfig">

                                        <@ for (var j = 0; j < item.length; j++){ @>
                                        <@if(item[j].indexOf("+")!=-1){@>
                                        <@item[j]=item[j].replace("+","");@>
                                        <li class="list-group-item">
                                            <@if(item[j]=='use_cpu'){@>
                                            cpu使用率
                                            <@}@>
                                            <@if(item[j]=='eth0_tx'){@>
                                            eth0网卡出网速
                                            <@}@>
                                            <@if(item[j]=='ping_value'){@>
                                            ping延时
                                            <@}@>
                                            <@if(item[j]=='mem_free'){@>
                                            内存占用
                                            <@}@>
                                            <@if(item[j]=='mem_total'){@>
                                            内存总大小
                                            <@}@>
                                            <@if(item[j]=='pix_percent'){@>
                                            pix占比
                                            <@}@>
                                            <@if(item[j]=='pix_total'){@>
                                            pix总大小
                                            <@}@>
                                            <@if(item[j]=='root_percent'){@>
                                            根目录占比
                                            <@}@>
                                            <@if(item[j]=='root_total'){@>
                                            根目录总大小
                                            <@}@>
                                            <@if(item[j]=='current_time'){@>
                                            脚本执行时间
                                            <@}@>
                                            <@if(item[j]=='io_util'){@>
                                            磁盘io使用率
                                            <@}@>
                                            <@if(item[j]=='raid_ok'){@>
                                            raid卡是否正常
                                            <@}@>
                                            <@if(item[j]=='sys_uptime'){@>
                                            系统开机时长
                                            <@}@>
                                            <@if(item[j]=='cpu_temp'){@>
                                            cpu温度
                                            <@}@>
                                            <@if(item[j]=='eth0_rx'){@>
                                            eth0网卡入网速
                                            <@}@>
                                        </li>
                                        <@}@>
                                        <@}@>
                                    </ul>
                                </div>

                                <div class="col-lg-6">
                                    <h4>未监控：</h4>
                                    <ul class="list-group">
                                        <@ for (var j = 0; j < item.length; j++){ @>
                                        <@if(item[j].indexOf("-")!=-1){@>
                                        <@item[j]=item[j].replace("-","");@>

                                        <li class="list-group-item">
                                            <@if(item[j]=='use_cpu'){@>
                                            cpu使用率
                                            <@}@>
                                            <@if(item[j]=='eth0_tx'){@>
                                            eth0网卡出网速
                                            <@}@>
                                            <@if(item[j]=='ping_value'){@>
                                            ping延时
                                            <@}@>
                                            <@if(item[j]=='mem_free'){@>
                                            内存占用
                                            <@}@>
                                            <@if(item[j]=='mem_total'){@>
                                            内存总大小
                                            <@}@>
                                            <@if(item[j]=='pix_percent'){@>
                                            pix占比
                                            <@}@>
                                            <@if(item[j]=='pix_total'){@>
                                            pix总大小
                                            <@}@>
                                            <@if(item[j]=='root_percent'){@>
                                            根目录占比
                                            <@}@>
                                            <@if(item[j]=='root_total'){@>
                                            根目录总大小
                                            <@}@>
                                            <@if(item[j]=='current_time'){@>
                                            脚本执行时间
                                            <@}@>
                                            <@if(item[j]=='io_util'){@>
                                            磁盘io使用率
                                            <@}@>
                                            <@if(item[j]=='raid_ok'){@>
                                            raid卡是否正常
                                            <@}@>
                                            <@if(item[j]=='sys_uptime'){@>
                                            系统开机时长
                                            <@}@>
                                            <@if(item[j]=='cpu_temp'){@>
                                            cpu温度
                                            <@}@>
                                            <@if(item[j]=='eth0_rx'){@>
                                            eth0网卡入网速
                                            <@}@>
                                        </li>
                                        <@}@>
                                        <@}@>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>-->
</body>
</html>